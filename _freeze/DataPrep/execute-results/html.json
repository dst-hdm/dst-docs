{
  "hash": "4af4aed99b6f6a754774d75f57da1802",
  "result": {
    "markdown": "# Dataprep\n\nWir haben unsere beiden Datensätze unterschiedlich aufbereitet. Im Folgenden wird dies genauer erläutert.\n\n## Dataprepartion Naturaldisaster:\n\n- Nach einer kurzen explorativen Datenanalyse, in der wir die Spalten und NaN-Werte betrachteten, starteten wir direkt mit der Datenvorbereitung für den Datensatz zu Naturkatastrophen.\n- Zuerst normalisierten wir die Länder mithilfe der Koordinaten und wandelten sie direkt in DataFrames um.\n- Anschließend entfernten wir bestimmte Spalten, darunter \"External IDs\", \"Event Name\", \"OFDA Response\", \"Declaration\", \"AID Contribution ('000 US$)\", \"Magnitude\", \"Magnitude Scale\", \"River Basin\", \"Admin Units\", \"Entry Date\", \"Last Update\". Diese Spalten waren entweder für unsere Visualisierung nicht relevant oder enthielten zu viele NaN-Werte, was ihre Aussagekraft beeinträchtigt hätte.\n- Nach diesem Schritt entfernten wir die verbleibenden NaN-Werte.\n- Anschließend erfolgte die Umwandlung der Datentypen, wobei entsprechender Python-Code verwendet wurde.\n  - Der Code erstellte einen Pandas DataFrame namens `empty_df`, der alle möglichen Kombinationen von 'Country', 'Disaster Type' und 'Start Year' enthielt. Dieser DataFrame wurde durch die Verwendung von MultiIndex erstellt, um die verschiedenen Dimensionen zu berücksichtigen.\n  - Der Code gruppierte dann einen vorhandenen DataFrame (`df_cleaned`) nach den Spalten 'Country', 'Disaster Type', 'Start Year' und 'ISO', um die Häufigkeit von Katastrophen pro Land, Katastrophentyp und Startjahr zu zählen. Diese Informationen wurden in einem DataFrame namens `df_nd_grouped` gespeichert. Der leere DataFrame wurde dann mit diesen gruppierten Daten gemerged, um fehlende Werte mit 0 zu füllen. Schließlich erfolgte eine weitere Fusion mit einem DataFrame (`df_coordinates`), der Länderkoordinaten enthielt, um ein finales DataFrame namens `merged_group` zu erstellen.\n- Abschließend wurde der DataFrame als CSV-Datei gespeichert.\n- Die verwendeten Bibliotheken waren Pandas und NumPy. Zusätzlich wurde eine JSON-Datei für die Ländercodes importiert.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport altair as alt\nfrom vega_datasets import data\n\nalt.data_transformers.disable_max_rows()\n\ndf_nd = pd.read_csv('./data/InternationalDisaster_cleaned.csv')\ndf_nd_full = pd.read_csv('data/InternationalDisaster.csv')\ndf_nd_grouped = pd.read_csv('data/InternationalDisaster_grouped.csv')\ndf_temp = pd.read_csv('data/GlobalLandTemperatur_cleaned.csv')\ndf_temp_agg = pd.read_csv('data/GlobalLandTemperatur_aggregated.csv')\ndf_temp_nd_combined = pd.read_csv('data/df_temp_nd_combined.csv')\ncountries = alt.topo_feature(data.world_110m.url, 'countries')\n\nchart_title_color = \"#d6d6d6\"\nchart_line_color = \"#3A86FF\"\nchart_marker_color = \"#e00707\"\n\nnd_type_colors = {\n    'Drought': '#FFBC42',\n    'Earthquake': '#b55a1d',\n    'Epidemic': '#06D6A0',\n    'Extreme temperature': '#EF476F',\n    'Flood': '#3A86FF',\n    'Fog': '#118AB2',\n    'Impact': '#16225c',\n    'Infestation': '#2f9e29',\n    'Mass movement (dry)': '#78259c',\n    'Mass movement (wet)': '#512599',\n    'Storm': '#287fa1',\n    'Volcanic activity': '#ab4c29',\n    'Wildfire': '#b52222'\n}\n\nnd_type_colors = {\n    'Drought': '#FFBC42',\n    'Earthquake': '#b55a1d',\n    'Epidemic': '#06D6A0',\n    'Extreme temperature': '#EF476F',\n    'Flood': '#3A86FF',\n    'Fog': '#118AB2',\n    'Impact': '#16225c',\n    'Infestation': '#2f9e29',\n    'Mass movement (dry)': '#78259c',\n    'Mass movement (wet)': '#512599',\n    'Storm': '#287fa1',\n    'Volcanic activity': '#ab4c29',\n    'Wildfire': '#b52222'\n}\n\nnd_type_colors_red = {\n    'Extreme temperature': nd_type_colors['Extreme temperature'],\n    'Storm': nd_type_colors['Storm'],\n    'Flood': nd_type_colors['Flood']\n}\ndf_nd.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>DisNo.</th>\n      <th>Historic</th>\n      <th>Classification Key</th>\n      <th>Disaster Group</th>\n      <th>Disaster Subgroup</th>\n      <th>Disaster Type</th>\n      <th>Disaster Subtype</th>\n      <th>ISO</th>\n      <th>Country</th>\n      <th>Subregion</th>\n      <th>...</th>\n      <th>Start Year</th>\n      <th>Start Month</th>\n      <th>Start Day</th>\n      <th>End Year</th>\n      <th>End Month</th>\n      <th>End Day</th>\n      <th>Total Deaths</th>\n      <th>No. Affected</th>\n      <th>Total Affected</th>\n      <th>CPI</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1920</td>\n      <td>Yes</td>\n      <td>nat-bio-epi-bac</td>\n      <td>Natural</td>\n      <td>Biological</td>\n      <td>Epidemic</td>\n      <td>Bacterial disease</td>\n      <td>IND</td>\n      <td>India</td>\n      <td>Southern Asia</td>\n      <td>...</td>\n      <td>1920</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>1920</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>2000000.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>6.832935e+09</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1920</td>\n      <td>Yes</td>\n      <td>nat-bio-epi-bac</td>\n      <td>Natural</td>\n      <td>Biological</td>\n      <td>Epidemic</td>\n      <td>Bacterial disease</td>\n      <td>IND</td>\n      <td>India</td>\n      <td>Southern Asia</td>\n      <td>...</td>\n      <td>1920</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>1920</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>500000.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>6.832935e+09</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1920</td>\n      <td>Yes</td>\n      <td>nat-hyd-flo-flo</td>\n      <td>Natural</td>\n      <td>Hydrological</td>\n      <td>Flood</td>\n      <td>Flood (General)</td>\n      <td>DFR</td>\n      <td>Germany</td>\n      <td>Western Europe</td>\n      <td>...</td>\n      <td>1920</td>\n      <td>8.0</td>\n      <td>NaN</td>\n      <td>1920</td>\n      <td>8.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>6.832935e+09</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1920</td>\n      <td>Yes</td>\n      <td>nat-geo-ear-gro</td>\n      <td>Natural</td>\n      <td>Geophysical</td>\n      <td>Earthquake</td>\n      <td>Ground movement</td>\n      <td>CHN</td>\n      <td>China</td>\n      <td>Eastern Asia</td>\n      <td>...</td>\n      <td>1920</td>\n      <td>12.0</td>\n      <td>16.0</td>\n      <td>1920</td>\n      <td>12.0</td>\n      <td>16.0</td>\n      <td>180000.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>6.832935e+09</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1920</td>\n      <td>Yes</td>\n      <td>nat-bio-epi-vir</td>\n      <td>Natural</td>\n      <td>Biological</td>\n      <td>Epidemic</td>\n      <td>Viral disease</td>\n      <td>AIA</td>\n      <td>Anguilla</td>\n      <td>Latin America and the Caribbean</td>\n      <td>...</td>\n      <td>1920</td>\n      <td>1.0</td>\n      <td>NaN</td>\n      <td>1920</td>\n      <td>1.0</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>6.832935e+09</td>\n    </tr>\n  </tbody>\n</table>\n<p>5 rows × 23 columns</p>\n</div>\n```\n:::\n:::\n\n\n## Data Preparation für Temperatur:\nZu Beginn der Datenvorbereitung für den Datensatz wurde jedem Land eine eindeutige UID-Zelle zugewiesen und diese wurde befüllt.\nAnschließend wurde die Datenstruktur durch das Betrachten von Head und Tail überprüft, woraufhin die verbleibenden NaN-Werte entfernt wurden.\nDanach wurden die Datentypen betrachtet und angepasst. Hierbei erfolgte eine Änderung des Datetime-Formats und der Datentyp der Spalte \"Country\" wurde zu \"Category\" geändert.\nAnschließend wurde der DataFrame nach der Jahreszahl gefiltert und alle UID-Werte, die als \"Unknown\" gekennzeichnet waren, wurden entfernt.\nNach dieser Aktion erfolgte die Verknüpfung mit den ISO-Ländercodes, wobei entsprechender Python-Code verwendet wurde.\nAnschließend wurden die Ländernamen an die Ländernamen des Datensatzes zu Naturkatastrophen angepasst.\nZum Abschluss wurde eine CSV-Datei erstellt.\nDie verwendeten Bibliotheken waren Pandas und pycountry.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ndf_temp.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>dt</th>\n      <th>AverageTemperature</th>\n      <th>AverageTemperatureUncertainty</th>\n      <th>uid</th>\n      <th>ISO</th>\n      <th>Country</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1920-01-01</td>\n      <td>1.385</td>\n      <td>0.589</td>\n      <td>4</td>\n      <td>AFG</td>\n      <td>Afghanistan</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>1920-02-01</td>\n      <td>0.689</td>\n      <td>0.742</td>\n      <td>4</td>\n      <td>AFG</td>\n      <td>Afghanistan</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>1920-03-01</td>\n      <td>7.944</td>\n      <td>0.953</td>\n      <td>4</td>\n      <td>AFG</td>\n      <td>Afghanistan</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>1920-04-01</td>\n      <td>11.725</td>\n      <td>0.849</td>\n      <td>4</td>\n      <td>AFG</td>\n      <td>Afghanistan</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>1920-05-01</td>\n      <td>17.695</td>\n      <td>0.662</td>\n      <td>4</td>\n      <td>AFG</td>\n      <td>Afghanistan</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n## Deep dive into Data:\nUm ein umfassenderes Verständnis für unsere Daten zu entwickeln und die Aussagekraft unserer Ergebnisse zu verstärken, haben wir mithilfe von Altair zunächst grundlegende Diagramme erstellt. Dies diente dazu, eine tiefere Einsicht in unsere Daten zu gewinnen. Wir begannen mit der Entwicklung eines Diagramms, das den Temperaturverlauf von 1920 bis 2013 zeigt. Anschließend erstellten wir ein Diagramm mit der Anzahl der Naturkatastrophen von 1920 bis 2013. Zusätzlich wurden weitere Balkendiagramme entworfen, um das Verhältnis verschiedener Naturkatastrophen zu visualisieren. Obwohl dieser Prozess mitunter anspruchsvoll war, erwies er sich als äußerst hilfreich für die Fortschritte in unserem Projekt. Die erstellten Diagramme ermöglichten uns tiefe Einblicke in unsere Daten zu gewinnen.\n\nTemperaturverlauf & Katastrophen (Sturm, Hitze und Fluten ) 1920 bis 2013\n\n::: {.cell title='Iowa Electricity' execution_count=3}\n``` {.python .cell-code}\nglobal_avg_temp = df_temp_agg.groupby(\n    'Year')['AverageTemperature'].mean().reset_index()\n\nglobal_avg_temp['Year'] = pd.to_datetime(\n    global_avg_temp['Year'], format='%Y')\nglobal_avg_temp['Year'] = global_avg_temp['Year'].dt.year\n\nglobal_avg_temp['AverageTemperature'] = global_avg_temp['AverageTemperature'].round(\n    2)\n\nglob_temp_chart = alt.Chart(global_avg_temp).mark_line(stroke=chart_line_color).encode(\n    x=alt.X('Year:O', axis=alt.Axis(\n        title='',\n        labelAngle=0,\n        values=list(range(global_avg_temp['Year'].min(\n        ), global_avg_temp['Year'].max() + 1, 5)),\n        titleAnchor='start',\n        labelColor='black',\n    )),\n    y=alt.Y('AverageTemperature:Q', axis=alt.Axis(\n        title='Temperatur in °C',\n        titleAnchor='start',\n        labelColor='black',\n        titleColor='black',\n    ), scale=alt.Scale(\n        domain=[18, 21])),\n    tooltip=['Year', 'AverageTemperature']\n).properties(\n    width=950,\n    title={\n        \"text\": \"Globaler Temperaturverlauf (1920 – 2013)\",\n        \"fontSize\": 18,\n        \"fontWeight\": 300,\n        \"anchor\": 'start',\n        \"color\": chart_title_color,\n    },\n)\n\n\nglob_temp_regression = glob_temp_chart.transform_regression(\n    'Year', 'AverageTemperature', method='linear'\n).mark_line(color=chart_marker_color)\n\ntext_at_end = alt.Chart(pd.DataFrame({'end_position': [19.8]})).mark_text(\n    align='left',\n    baseline='middle',\n    dx=360,\n    dy=0,\n    color=chart_marker_color,\n    text='Anstieg: 0.8 °C',\n    fontWeight=800,\n    fontSize=14\n).encode(\n    y='end_position:Q'\n)\n\n\nglob_temp_chart.configure(background=\"rgba(0, 0, 0, 0)\")\n\n(glob_temp_chart + glob_temp_regression +\n text_at_end).configure(background=\"rgba(0, 0, 0, 0)\")\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n\n<style>\n  #altair-viz-f6aae1f0ad6a46f189511131ba875020.vega-embed {\n    width: 100%;\n    display: flex;\n  }\n\n  #altair-viz-f6aae1f0ad6a46f189511131ba875020.vega-embed details,\n  #altair-viz-f6aae1f0ad6a46f189511131ba875020.vega-embed details summary {\n    position: relative;\n  }\n</style>\n<div id=\"altair-viz-f6aae1f0ad6a46f189511131ba875020\"></div>\n<script type=\"text/javascript\">\n  var VEGA_DEBUG = (typeof VEGA_DEBUG == \"undefined\") ? {} : VEGA_DEBUG;\n  (function(spec, embedOpt){\n    let outputDiv = document.currentScript.previousElementSibling;\n    if (outputDiv.id !== \"altair-viz-f6aae1f0ad6a46f189511131ba875020\") {\n      outputDiv = document.getElementById(\"altair-viz-f6aae1f0ad6a46f189511131ba875020\");\n    }\n    const paths = {\n      \"vega\": \"https://cdn.jsdelivr.net/npm/vega@5?noext\",\n      \"vega-lib\": \"https://cdn.jsdelivr.net/npm/vega-lib?noext\",\n      \"vega-lite\": \"https://cdn.jsdelivr.net/npm/vega-lite@5.15.1?noext\",\n      \"vega-embed\": \"https://cdn.jsdelivr.net/npm/vega-embed@6?noext\",\n    };\n\n    function maybeLoadScript(lib, version) {\n      var key = `${lib.replace(\"-\", \"\")}_version`;\n      return (VEGA_DEBUG[key] == version) ?\n        Promise.resolve(paths[lib]) :\n        new Promise(function(resolve, reject) {\n          var s = document.createElement('script');\n          document.getElementsByTagName(\"head\")[0].appendChild(s);\n          s.async = true;\n          s.onload = () => {\n            VEGA_DEBUG[key] = version;\n            return resolve(paths[lib]);\n          };\n          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n          s.src = paths[lib];\n        });\n    }\n\n    function showError(err) {\n      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n      throw err;\n    }\n\n    function displayChart(vegaEmbed) {\n      vegaEmbed(outputDiv, spec, embedOpt)\n        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n    }\n\n    if(typeof define === \"function\" && define.amd) {\n      requirejs.config({paths});\n      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n    } else {\n      maybeLoadScript(\"vega\", \"5\")\n        .then(() => maybeLoadScript(\"vega-lite\", \"5.15.1\"))\n        .then(() => maybeLoadScript(\"vega-embed\", \"6\"))\n        .catch(showError)\n        .then(() => displayChart(vegaEmbed));\n    }\n  })({\"config\": {\"view\": {\"continuousWidth\": 300, \"continuousHeight\": 300}, \"background\": \"rgba(0, 0, 0, 0)\"}, \"layer\": [{\"mark\": {\"type\": \"line\", \"stroke\": \"#3A86FF\"}, \"encoding\": {\"tooltip\": [{\"field\": \"Year\", \"type\": \"quantitative\"}, {\"field\": \"AverageTemperature\", \"type\": \"quantitative\"}], \"x\": {\"axis\": {\"labelAngle\": 0, \"labelColor\": \"black\", \"title\": \"\", \"titleAnchor\": \"start\", \"values\": [1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010]}, \"field\": \"Year\", \"type\": \"ordinal\"}, \"y\": {\"axis\": {\"labelColor\": \"black\", \"title\": \"Temperatur in \\u00b0C\", \"titleAnchor\": \"start\", \"titleColor\": \"black\"}, \"field\": \"AverageTemperature\", \"scale\": {\"domain\": [18, 21]}, \"type\": \"quantitative\"}}, \"title\": {\"text\": \"Globaler Temperaturverlauf (1920 \\u2013 2013)\", \"fontSize\": 18, \"fontWeight\": 300, \"anchor\": \"start\", \"color\": \"#d6d6d6\"}}, {\"mark\": {\"type\": \"line\", \"color\": \"#e00707\"}, \"encoding\": {\"tooltip\": [{\"field\": \"Year\", \"type\": \"quantitative\"}, {\"field\": \"AverageTemperature\", \"type\": \"quantitative\"}], \"x\": {\"axis\": {\"labelAngle\": 0, \"labelColor\": \"black\", \"title\": \"\", \"titleAnchor\": \"start\", \"values\": [1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010]}, \"field\": \"Year\", \"type\": \"ordinal\"}, \"y\": {\"axis\": {\"labelColor\": \"black\", \"title\": \"Temperatur in \\u00b0C\", \"titleAnchor\": \"start\", \"titleColor\": \"black\"}, \"field\": \"AverageTemperature\", \"scale\": {\"domain\": [18, 21]}, \"type\": \"quantitative\"}}, \"title\": {\"text\": \"Globaler Temperaturverlauf (1920 \\u2013 2013)\", \"fontSize\": 18, \"fontWeight\": 300, \"anchor\": \"start\", \"color\": \"#d6d6d6\"}, \"transform\": [{\"on\": \"Year\", \"regression\": \"AverageTemperature\", \"method\": \"linear\"}]}, {\"data\": {\"name\": \"data-a8e8341873f079ab6a0e8fafe62d3d87\"}, \"mark\": {\"type\": \"text\", \"align\": \"left\", \"baseline\": \"middle\", \"color\": \"#e00707\", \"dx\": 360, \"dy\": 0, \"fontSize\": 14, \"fontWeight\": 800, \"text\": \"Anstieg: 0.8 \\u00b0C\"}, \"encoding\": {\"y\": {\"field\": \"end_position\", \"type\": \"quantitative\"}}}], \"data\": {\"name\": \"data-577afa6078a9bcb211c9dfe21d62cbd8\"}, \"width\": 950, \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.15.1.json\", \"datasets\": {\"data-577afa6078a9bcb211c9dfe21d62cbd8\": [{\"Year\": 1920, \"AverageTemperature\": 19.19}, {\"Year\": 1921, \"AverageTemperature\": 19.27}, {\"Year\": 1922, \"AverageTemperature\": 19.21}, {\"Year\": 1923, \"AverageTemperature\": 19.24}, {\"Year\": 1924, \"AverageTemperature\": 19.3}, {\"Year\": 1925, \"AverageTemperature\": 19.28}, {\"Year\": 1926, \"AverageTemperature\": 19.55}, {\"Year\": 1927, \"AverageTemperature\": 19.44}, {\"Year\": 1928, \"AverageTemperature\": 19.41}, {\"Year\": 1929, \"AverageTemperature\": 19.16}, {\"Year\": 1930, \"AverageTemperature\": 19.52}, {\"Year\": 1931, \"AverageTemperature\": 19.43}, {\"Year\": 1932, \"AverageTemperature\": 19.43}, {\"Year\": 1933, \"AverageTemperature\": 19.23}, {\"Year\": 1934, \"AverageTemperature\": 19.48}, {\"Year\": 1935, \"AverageTemperature\": 19.39}, {\"Year\": 1936, \"AverageTemperature\": 19.49}, {\"Year\": 1937, \"AverageTemperature\": 19.61}, {\"Year\": 1938, \"AverageTemperature\": 19.54}, {\"Year\": 1939, \"AverageTemperature\": 19.49}, {\"Year\": 1940, \"AverageTemperature\": 19.38}, {\"Year\": 1941, \"AverageTemperature\": 19.6}, {\"Year\": 1942, \"AverageTemperature\": 19.45}, {\"Year\": 1943, \"AverageTemperature\": 19.46}, {\"Year\": 1944, \"AverageTemperature\": 19.53}, {\"Year\": 1945, \"AverageTemperature\": 19.47}, {\"Year\": 1946, \"AverageTemperature\": 19.61}, {\"Year\": 1947, \"AverageTemperature\": 19.74}, {\"Year\": 1948, \"AverageTemperature\": 19.57}, {\"Year\": 1949, \"AverageTemperature\": 19.52}, {\"Year\": 1950, \"AverageTemperature\": 19.38}, {\"Year\": 1951, \"AverageTemperature\": 19.58}, {\"Year\": 1952, \"AverageTemperature\": 19.61}, {\"Year\": 1953, \"AverageTemperature\": 19.63}, {\"Year\": 1954, \"AverageTemperature\": 19.36}, {\"Year\": 1955, \"AverageTemperature\": 19.46}, {\"Year\": 1956, \"AverageTemperature\": 19.08}, {\"Year\": 1957, \"AverageTemperature\": 19.56}, {\"Year\": 1958, \"AverageTemperature\": 19.76}, {\"Year\": 1959, \"AverageTemperature\": 19.6}, {\"Year\": 1960, \"AverageTemperature\": 19.68}, {\"Year\": 1961, \"AverageTemperature\": 19.71}, {\"Year\": 1962, \"AverageTemperature\": 19.51}, {\"Year\": 1963, \"AverageTemperature\": 19.53}, {\"Year\": 1964, \"AverageTemperature\": 19.38}, {\"Year\": 1965, \"AverageTemperature\": 19.33}, {\"Year\": 1966, \"AverageTemperature\": 19.69}, {\"Year\": 1967, \"AverageTemperature\": 19.42}, {\"Year\": 1968, \"AverageTemperature\": 19.4}, {\"Year\": 1969, \"AverageTemperature\": 19.58}, {\"Year\": 1970, \"AverageTemperature\": 19.61}, {\"Year\": 1971, \"AverageTemperature\": 19.4}, {\"Year\": 1972, \"AverageTemperature\": 19.49}, {\"Year\": 1973, \"AverageTemperature\": 19.69}, {\"Year\": 1974, \"AverageTemperature\": 19.43}, {\"Year\": 1975, \"AverageTemperature\": 19.54}, {\"Year\": 1976, \"AverageTemperature\": 19.25}, {\"Year\": 1977, \"AverageTemperature\": 19.72}, {\"Year\": 1978, \"AverageTemperature\": 19.52}, {\"Year\": 1979, \"AverageTemperature\": 19.74}, {\"Year\": 1980, \"AverageTemperature\": 19.68}, {\"Year\": 1981, \"AverageTemperature\": 19.72}, {\"Year\": 1982, \"AverageTemperature\": 19.65}, {\"Year\": 1983, \"AverageTemperature\": 19.91}, {\"Year\": 1984, \"AverageTemperature\": 19.57}, {\"Year\": 1985, \"AverageTemperature\": 19.51}, {\"Year\": 1986, \"AverageTemperature\": 19.63}, {\"Year\": 1987, \"AverageTemperature\": 19.88}, {\"Year\": 1988, \"AverageTemperature\": 19.92}, {\"Year\": 1989, \"AverageTemperature\": 19.83}, {\"Year\": 1990, \"AverageTemperature\": 20.11}, {\"Year\": 1991, \"AverageTemperature\": 19.82}, {\"Year\": 1992, \"AverageTemperature\": 19.77}, {\"Year\": 1993, \"AverageTemperature\": 19.73}, {\"Year\": 1994, \"AverageTemperature\": 20.04}, {\"Year\": 1995, \"AverageTemperature\": 20.08}, {\"Year\": 1996, \"AverageTemperature\": 19.76}, {\"Year\": 1997, \"AverageTemperature\": 20.05}, {\"Year\": 1998, \"AverageTemperature\": 20.4}, {\"Year\": 1999, \"AverageTemperature\": 20.19}, {\"Year\": 2000, \"AverageTemperature\": 20.16}, {\"Year\": 2001, \"AverageTemperature\": 20.22}, {\"Year\": 2002, \"AverageTemperature\": 20.36}, {\"Year\": 2003, \"AverageTemperature\": 20.3}, {\"Year\": 2004, \"AverageTemperature\": 20.22}, {\"Year\": 2005, \"AverageTemperature\": 20.3}, {\"Year\": 2006, \"AverageTemperature\": 20.31}, {\"Year\": 2007, \"AverageTemperature\": 20.4}, {\"Year\": 2008, \"AverageTemperature\": 20.22}, {\"Year\": 2009, \"AverageTemperature\": 20.35}, {\"Year\": 2010, \"AverageTemperature\": 20.46}, {\"Year\": 2011, \"AverageTemperature\": 20.23}, {\"Year\": 2012, \"AverageTemperature\": 20.24}, {\"Year\": 2013, \"AverageTemperature\": 20.69}], \"data-a8e8341873f079ab6a0e8fafe62d3d87\": [{\"end_position\": 19.8}]}}, {\"mode\": \"vega-lite\"});\n</script>\n```\n:::\n:::\n\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\ndf_nd_filtered = df_nd_grouped[(df_nd_grouped['Frequency'] > 0) & ((\n    df_nd_grouped['Disaster Type'] == 'Flood') | (df_nd_grouped['Disaster Type'] == 'Storm') | (df_nd_grouped['Disaster Type'] == 'Extreme temperatur'))]\nglobal_disaster_freq = df_nd_filtered.groupby(\n    ['Start Year'])['Frequency'].sum().reset_index()\n\nnd_line_chart = alt.Chart(global_disaster_freq).mark_line(stroke=chart_line_color).encode(\n    x=alt.X('Start Year:O', axis=alt.Axis(\n        title='',\n        labelAngle=0,\n        values=list(range(global_avg_temp['Year'].min(\n        ), global_avg_temp['Year'].max() + 1, 5)),\n        labelColor='black',\n    )),\n    y=alt.Y('Frequency:Q').axis(\n        title='Häufigkeit',\n        titleAnchor='start',\n        labelColor='black',\n        titleColor='black'\n    ),\n).properties(\n    width=950,\n    height=290,\n    title={\n        \"text\": \"Weltweite Häufigkeit pro Jahr: Stürmen, Extremtemperaturen und Überschwemmungen (1920 – 2013)\",\n        \"fontSize\": 18,\n        \"fontWeight\": 300,\n        \"anchor\": 'start',\n        \"color\": chart_title_color,\n    },\n)\nnd_line_chart.configure(background=\"rgba(0, 0, 0, 0)\")\n```\n\n::: {.cell-output .cell-output-display execution_count=8}\n```{=html}\n\n<style>\n  #altair-viz-fef9525cae304352bdc60bdf28959970.vega-embed {\n    width: 100%;\n    display: flex;\n  }\n\n  #altair-viz-fef9525cae304352bdc60bdf28959970.vega-embed details,\n  #altair-viz-fef9525cae304352bdc60bdf28959970.vega-embed details summary {\n    position: relative;\n  }\n</style>\n<div id=\"altair-viz-fef9525cae304352bdc60bdf28959970\"></div>\n<script type=\"text/javascript\">\n  var VEGA_DEBUG = (typeof VEGA_DEBUG == \"undefined\") ? {} : VEGA_DEBUG;\n  (function(spec, embedOpt){\n    let outputDiv = document.currentScript.previousElementSibling;\n    if (outputDiv.id !== \"altair-viz-fef9525cae304352bdc60bdf28959970\") {\n      outputDiv = document.getElementById(\"altair-viz-fef9525cae304352bdc60bdf28959970\");\n    }\n    const paths = {\n      \"vega\": \"https://cdn.jsdelivr.net/npm/vega@5?noext\",\n      \"vega-lib\": \"https://cdn.jsdelivr.net/npm/vega-lib?noext\",\n      \"vega-lite\": \"https://cdn.jsdelivr.net/npm/vega-lite@5.15.1?noext\",\n      \"vega-embed\": \"https://cdn.jsdelivr.net/npm/vega-embed@6?noext\",\n    };\n\n    function maybeLoadScript(lib, version) {\n      var key = `${lib.replace(\"-\", \"\")}_version`;\n      return (VEGA_DEBUG[key] == version) ?\n        Promise.resolve(paths[lib]) :\n        new Promise(function(resolve, reject) {\n          var s = document.createElement('script');\n          document.getElementsByTagName(\"head\")[0].appendChild(s);\n          s.async = true;\n          s.onload = () => {\n            VEGA_DEBUG[key] = version;\n            return resolve(paths[lib]);\n          };\n          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);\n          s.src = paths[lib];\n        });\n    }\n\n    function showError(err) {\n      outputDiv.innerHTML = `<div class=\"error\" style=\"color:red;\">${err}</div>`;\n      throw err;\n    }\n\n    function displayChart(vegaEmbed) {\n      vegaEmbed(outputDiv, spec, embedOpt)\n        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));\n    }\n\n    if(typeof define === \"function\" && define.amd) {\n      requirejs.config({paths});\n      require([\"vega-embed\"], displayChart, err => showError(`Error loading script: ${err.message}`));\n    } else {\n      maybeLoadScript(\"vega\", \"5\")\n        .then(() => maybeLoadScript(\"vega-lite\", \"5.15.1\"))\n        .then(() => maybeLoadScript(\"vega-embed\", \"6\"))\n        .catch(showError)\n        .then(() => displayChart(vegaEmbed));\n    }\n  })({\"config\": {\"view\": {\"continuousWidth\": 300, \"continuousHeight\": 300}, \"background\": \"rgba(0, 0, 0, 0)\"}, \"data\": {\"name\": \"data-a96181495893bc4226b7cdf3fe105392\"}, \"mark\": {\"type\": \"line\", \"stroke\": \"#3A86FF\"}, \"encoding\": {\"x\": {\"axis\": {\"labelAngle\": 0, \"labelColor\": \"black\", \"title\": \"\", \"values\": [1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010]}, \"field\": \"Start Year\", \"type\": \"ordinal\"}, \"y\": {\"axis\": {\"title\": \"H\\u00e4ufigkeit\", \"titleAnchor\": \"start\", \"labelColor\": \"black\", \"titleColor\": \"black\"}, \"field\": \"Frequency\", \"type\": \"quantitative\"}}, \"height\": 290, \"title\": {\"text\": \"Weltweite H\\u00e4ufigkeit pro Jahr: St\\u00fcrmen, Extremtemperaturen und \\u00dcberschwemmungen (1920 \\u2013 2013)\", \"fontSize\": 18, \"fontWeight\": 300, \"anchor\": \"start\", \"color\": \"#d6d6d6\"}, \"width\": 950, \"$schema\": \"https://vega.github.io/schema/vega-lite/v5.15.1.json\", \"datasets\": {\"data-a96181495893bc4226b7cdf3fe105392\": [{\"Start Year\": 1920, \"Frequency\": 2.0}, {\"Start Year\": 1922, \"Frequency\": 2.0}, {\"Start Year\": 1923, \"Frequency\": 6.0}, {\"Start Year\": 1924, \"Frequency\": 2.0}, {\"Start Year\": 1925, \"Frequency\": 4.0}, {\"Start Year\": 1926, \"Frequency\": 10.0}, {\"Start Year\": 1927, \"Frequency\": 6.0}, {\"Start Year\": 1928, \"Frequency\": 9.0}, {\"Start Year\": 1929, \"Frequency\": 2.0}, {\"Start Year\": 1930, \"Frequency\": 4.0}, {\"Start Year\": 1931, \"Frequency\": 5.0}, {\"Start Year\": 1932, \"Frequency\": 5.0}, {\"Start Year\": 1933, \"Frequency\": 5.0}, {\"Start Year\": 1934, \"Frequency\": 4.0}, {\"Start Year\": 1935, \"Frequency\": 8.0}, {\"Start Year\": 1936, \"Frequency\": 6.0}, {\"Start Year\": 1937, \"Frequency\": 5.0}, {\"Start Year\": 1938, \"Frequency\": 4.0}, {\"Start Year\": 1939, \"Frequency\": 4.0}, {\"Start Year\": 1940, \"Frequency\": 4.0}, {\"Start Year\": 1941, \"Frequency\": 4.0}, {\"Start Year\": 1942, \"Frequency\": 3.0}, {\"Start Year\": 1943, \"Frequency\": 5.0}, {\"Start Year\": 1944, \"Frequency\": 5.0}, {\"Start Year\": 1945, \"Frequency\": 7.0}, {\"Start Year\": 1946, \"Frequency\": 5.0}, {\"Start Year\": 1947, \"Frequency\": 8.0}, {\"Start Year\": 1948, \"Frequency\": 15.0}, {\"Start Year\": 1949, \"Frequency\": 10.0}, {\"Start Year\": 1950, \"Frequency\": 17.0}, {\"Start Year\": 1951, \"Frequency\": 18.0}, {\"Start Year\": 1952, \"Frequency\": 13.0}, {\"Start Year\": 1953, \"Frequency\": 23.0}, {\"Start Year\": 1954, \"Frequency\": 19.0}, {\"Start Year\": 1955, \"Frequency\": 22.0}, {\"Start Year\": 1956, \"Frequency\": 23.0}, {\"Start Year\": 1957, \"Frequency\": 20.0}, {\"Start Year\": 1958, \"Frequency\": 16.0}, {\"Start Year\": 1959, \"Frequency\": 29.0}, {\"Start Year\": 1960, \"Frequency\": 27.0}, {\"Start Year\": 1961, \"Frequency\": 22.0}, {\"Start Year\": 1962, \"Frequency\": 21.0}, {\"Start Year\": 1963, \"Frequency\": 29.0}, {\"Start Year\": 1964, \"Frequency\": 44.0}, {\"Start Year\": 1965, \"Frequency\": 38.0}, {\"Start Year\": 1966, \"Frequency\": 50.0}, {\"Start Year\": 1967, \"Frequency\": 51.0}, {\"Start Year\": 1968, \"Frequency\": 45.0}, {\"Start Year\": 1969, \"Frequency\": 39.0}, {\"Start Year\": 1970, \"Frequency\": 55.0}, {\"Start Year\": 1971, \"Frequency\": 37.0}, {\"Start Year\": 1972, \"Frequency\": 41.0}, {\"Start Year\": 1973, \"Frequency\": 42.0}, {\"Start Year\": 1974, \"Frequency\": 45.0}, {\"Start Year\": 1975, \"Frequency\": 42.0}, {\"Start Year\": 1976, \"Frequency\": 46.0}, {\"Start Year\": 1977, \"Frequency\": 76.0}, {\"Start Year\": 1978, \"Frequency\": 85.0}, {\"Start Year\": 1979, \"Frequency\": 64.0}, {\"Start Year\": 1980, \"Frequency\": 75.0}, {\"Start Year\": 1981, \"Frequency\": 88.0}, {\"Start Year\": 1982, \"Frequency\": 99.0}, {\"Start Year\": 1983, \"Frequency\": 103.0}, {\"Start Year\": 1984, \"Frequency\": 99.0}, {\"Start Year\": 1985, \"Frequency\": 106.0}, {\"Start Year\": 1986, \"Frequency\": 102.0}, {\"Start Year\": 1987, \"Frequency\": 123.0}, {\"Start Year\": 1988, \"Frequency\": 135.0}, {\"Start Year\": 1989, \"Frequency\": 118.0}, {\"Start Year\": 1990, \"Frequency\": 195.0}, {\"Start Year\": 1991, \"Frequency\": 141.0}, {\"Start Year\": 1992, \"Frequency\": 134.0}, {\"Start Year\": 1993, \"Frequency\": 191.0}, {\"Start Year\": 1994, \"Frequency\": 168.0}, {\"Start Year\": 1995, \"Frequency\": 173.0}, {\"Start Year\": 1996, \"Frequency\": 168.0}, {\"Start Year\": 1997, \"Frequency\": 174.0}, {\"Start Year\": 1998, \"Frequency\": 182.0}, {\"Start Year\": 1999, \"Frequency\": 228.0}, {\"Start Year\": 2000, \"Frequency\": 259.0}, {\"Start Year\": 2001, \"Frequency\": 261.0}, {\"Start Year\": 2002, \"Frequency\": 294.0}, {\"Start Year\": 2003, \"Frequency\": 244.0}, {\"Start Year\": 2004, \"Frequency\": 252.0}, {\"Start Year\": 2005, \"Frequency\": 321.0}, {\"Start Year\": 2006, \"Frequency\": 302.0}, {\"Start Year\": 2007, \"Frequency\": 321.0}, {\"Start Year\": 2008, \"Frequency\": 277.0}, {\"Start Year\": 2009, \"Frequency\": 238.0}, {\"Start Year\": 2010, \"Frequency\": 278.0}, {\"Start Year\": 2011, \"Frequency\": 240.0}, {\"Start Year\": 2012, \"Frequency\": 227.0}, {\"Start Year\": 2013, \"Frequency\": 253.0}]}}, {\"mode\": \"vega-lite\"});\n</script>\n```\n:::\n:::\n\n\n",
    "supporting": [
      "DataPrep_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}